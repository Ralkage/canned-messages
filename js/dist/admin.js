module.exports=function(t){var e={};function n(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e){t.exports=flarum.core.compat.app},function(t,e,n){"use strict";function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",function(){return a})},function(t,e){t.exports=flarum.core.compat.Model},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var a=n(1),s=n(2),o=n.n(s),r=n(5),i=function(t){function e(){return t.apply(this,arguments)||this}return Object(a.a)(e,t),e.prototype.apiEndpoint=function(){return"/flagrow/canned-messages"+(this.exists?"/"+this.data.id:"")},e}(n.n(r)()(o.a,{key:o.a.attribute("key"),locale:o.a.attribute("locale"),style:o.a.attribute("style"),content:o.a.attribute("content")}))},function(t,e){t.exports=flarum.core.compat["utils/mixin"]},function(t,e){t.exports=flarum.core.compat.Component},function(t,e){t.exports=flarum.core.compat["components/Select"]},function(t,e){t.exports=flarum.core.compat["components/SettingsModal"]},function(t,e){t.exports=flarum.core.compat.extend},function(t,e){t.exports=flarum.core.compat["components/AdminNav"]},function(t,e){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,e){t.exports=flarum.core.compat["components/Page"]},function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),o=n(4),r=n(1),i=n(8),c=n.n(i),l=n(3),u=n.n(l),p=function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t);var n=e.prototype;return n.title=function(){return s.a.translator.trans("flagrow-canned-messages.admin.settings.title")},n.form=function(){return[m(".Form-group",[u.a.component({className:"Button",icon:"map-signs",children:s.a.translator.trans("flagrow-canned-messages.admin.buttons.configure-messages"),onclick:function(){m.route(s.a.route("flagrow-canned-messages")),s.a.modal.close()}})]),m(".Form-group",[m("label",s.a.translator.trans("flagrow-canned-messages.admin.settings.bbtag")),m("input.FormControl",{bidi:this.setting("flagrow.canned-messages.bbtag"),placeholder:"CANNED-MESSAGE"}),m(".helpText",s.a.translator.trans("flagrow-canned-messages.admin.settings.bbtag-help"))])]},e}(c.a),d=n(9),g=n(10),f=n.n(g),h=n(11),b=n.n(h),y=n(12),w=n.n(y),v=n(6),x=n.n(v),A=n(7),k=n.n(A),M=function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t);var n=e.prototype;return n.init=function(){for(var t in this.options={all:s.a.translator.trans("flagrow-canned-messages.admin.locales.all")},s.a.data.locales)s.a.data.locales.hasOwnProperty(t)&&(this.options[t]=s.a.data.locales[t]+" ("+t+")")},n.view=function(){var t=this;return k.a.component({options:this.options,value:null===this.props.value?"all":this.props.value,onchange:function(e){"all"===e?t.props.onchange(null):t.props.onchange(e)}})},e}(x.a),O=function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t);var n=e.prototype;return n.init=function(){this.message=this.props.message,this.dirty=!1,this.processing=!1,null===this.message&&this.initNewMessage()},n.initNewMessage=function(){this.message=s.a.store.createRecord("flagrow-canned-message",{attributes:{key:"",locale:null,style:null,content:""}})},n.view=function(){var t=this,e=s.a.data.settings["flagrow.canned-messages.bbtag"]||"CANNED-MESSAGE";return m("tr",[m("td",[m("input.FormControl",{value:this.message.key(),oninput:m.withAttr("value",this.updateAttribute.bind(this,"key"))}),this.message.key()?["Use as ",m("code","["+e+"]"+this.message.key()+"[/"+e+"]")]:null]),m("td",[M.component({value:this.message.locale(),onchange:this.updateAttribute.bind(this,"locale")})]),m("td",[k.a.component({value:null===this.message.style()?"none":this.message.style(),onchange:function(e){t.updateAttribute("style","none"===e?null:e)},options:{none:"None",alert:"Default Alert","alert-success":"Success Alert","alert-error":"Error Alert"}})]),m("td",[m("input.FormControl",{value:this.message.content(),oninput:m.withAttr("value",this.updateAttribute.bind(this,"content"))})]),m("td",m("li.ButtonGroup",[u.a.component({type:"submit",className:"Button Button--primary",children:s.a.translator.trans("flagrow-canned-messages.admin.buttons."+(this.message.exists?"save":"add")+"-message"),loading:this.processing,disabled:!this.dirty,onclick:this.saveMessage.bind(this)}),this.message.exists?u.a.component({type:"submit",className:"Button Button--danger",children:s.a.translator.trans("flagrow-canned-messages.admin.buttons.delete-message"),loading:this.processing,onclick:this.deleteMessage.bind(this)}):""]))])},n.updateAttribute=function(t,e){var n;this.message.pushAttributes(((n={})[t]=e,n)),this.dirty=!0},n.saveMessage=function(){var t=this;this.processing=!0;var e=!this.message.exists;this.message.save(this.message.data.attributes).then(function(){t.processing=!1,t.dirty=!1,e&&t.initNewMessage(),m.redraw()}).catch(function(e){throw t.processing=!1,e})},n.deleteMessage=function(){var t=this;this.processing=!0,this.message.delete().then(function(){t.processing=!1,m.redraw()}).catch(function(e){throw t.processing=!1,e})},e}(x.a),j=function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t);var n=e.prototype;return n.init=function(){t.prototype.init.call(this),s.a.request({method:"GET",url:s.a.forum.attribute("apiUrl")+"/flagrow/canned-messages"}).then(function(t){s.a.store.pushPayload(t),m.redraw()})},n.view=function(){var t,e,n=s.a.store.all("flagrow-canned-message").sort((t="key",void 0===e&&(e="asc"),function(n,a){var s=n[t](),o=a[t](),r=0;return s>o?r=1:o>s&&(r=-1),"desc"===e&&(r*=-1),r}));return m(".container",[m("table.Flagrow-Canned-Messages",[m("thead",m("tr",[m("th",s.a.translator.trans("flagrow-canned-messages.admin.strings.key")),m("th",s.a.translator.trans("flagrow-canned-messages.admin.strings.locale")),m("th",s.a.translator.trans("flagrow-canned-messages.admin.strings.style")),m("th",s.a.translator.trans("flagrow-canned-messages.admin.strings.content"))])),m("tbody",n.map(function(t){return O.component({key:t.id(),message:t})})),m("tbody",O.component({key:"new",message:null}))]),u.a.component({className:"Button",icon:"cog",children:s.a.translator.trans("flagrow-canned-messages.admin.buttons.configure-advanced"),onclick:function(){s.a.modal.show(new p)}})])},e}(w.a);s.a.initializers.add("flagrow-canned-messages",function(t){t.store.models["flagrow-canned-message"]=o.a,t.extensionSettings["flagrow-canned-messages"]=function(){return t.modal.show(new p)},s.a.routes["flagrow-canned-messages"]={path:"/flagrow/canned-messages",component:j.component()},Object(d.extend)(f.a.prototype,"items",function(t){t.add("flagrow-canned-messages",b.a.component({href:s.a.route("flagrow-canned-messages"),icon:"map-signs",children:s.a.translator.trans("flagrow-canned-messages.admin.menu.title"),description:s.a.translator.trans("flagrow-canned-messages.admin.menu.description")}))})})}]);
//# sourceMappingURL=admin.js.map