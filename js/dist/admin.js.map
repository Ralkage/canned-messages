{"version":3,"sources":["webpack://@flagrow/canned-messages/webpack/bootstrap","webpack://@flagrow/canned-messages/external \"flarum.core.compat['app']\"","webpack://@flagrow/canned-messages/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/canned-messages/external \"flarum.core.compat['Model']\"","webpack://@flagrow/canned-messages/external \"flarum.core.compat['components/Button']\"","webpack://@flagrow/canned-messages/./src/common/models/Message.js","webpack://@flagrow/canned-messages/external \"flarum.core.compat['utils/mixin']\"","webpack://@flagrow/canned-messages/external \"flarum.core.compat['Component']\"","webpack://@flagrow/canned-messages/external \"flarum.core.compat['components/Select']\"","webpack://@flagrow/canned-messages/external \"flarum.core.compat['components/SettingsModal']\"","webpack://@flagrow/canned-messages/external \"flarum.core.compat['extend']\"","webpack://@flagrow/canned-messages/external \"flarum.core.compat['components/AdminNav']\"","webpack://@flagrow/canned-messages/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@flagrow/canned-messages/external \"flarum.core.compat['components/Page']\"","webpack://@flagrow/canned-messages/./src/admin/components/Settings.js","webpack://@flagrow/canned-messages/./src/admin/components/LocaleDropdown.js","webpack://@flagrow/canned-messages/./src/admin/components/MessageEdit.js","webpack://@flagrow/canned-messages/./src/admin/components/MessagesPage.js","webpack://@flagrow/canned-messages/./src/admin/utils/sortByProp.js","webpack://@flagrow/canned-messages/./src/admin/index.js","webpack://@flagrow/canned-messages/./src/admin/addMessagesPane.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_inheritsLoose","subClass","superClass","constructor","__proto__","__webpack_exports__","Message","apiEndpoint","this","exists","data","id","mixin","Model","attribute","locale","style","content","Settings","title","app","translator","trans","translationPrefix","form","Button","component","className","icon","children","onclick","route","modal","close","bidi","setting","settingsPrefix","placeholder","SettingsModal","LocaleDropdown","init","options","all","locales","view","_this","Select","props","onchange","Component","MessageEdit","message","dirty","processing","initNewMessage","store","createRecord","attributes","bbtag","settings","oninput","withAttr","updateAttribute","none","alert","alert-success","alert-error","type","loading","disabled","saveMessage","deleteMessage","_this$message$pushAtt","pushAttributes","_this2","wasNew","save","then","redraw","err","_this3","MessagesPane","_Page","request","method","url","forum","result","pushPayload","prop","order","messages","sort","a","b","value1","value2","map","show","Page","initializers","add","models","extensionSettings","routes","path","MessagesPage","extend","AdminNav","items","AdminLinkButton","href","description"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n","module.exports = flarum.core.compat['app'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Button'];","import Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\n\r\nexport default class Message extends mixin(Model, {\r\n    key: Model.attribute('key'),\r\n    locale: Model.attribute('locale'),\r\n    style: Model.attribute('style'),\r\n    content: Model.attribute('content'),\r\n}) {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    apiEndpoint() {\r\n        return '/flagrow/canned-messages' + (this.exists ? '/' + this.data.id : '');\r\n    }\r\n}\r\n","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/SettingsModal'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/Page'];","import app from 'flarum/app';\r\nimport SettingsModal from 'flarum/components/SettingsModal';\r\nimport Button from 'flarum/components/Button';\r\n\r\nconst settingsPrefix = 'flagrow.canned-messages.';\r\nconst translationPrefix = 'flagrow-canned-messages.admin.settings.';\r\n\r\nexport default class Settings extends SettingsModal {\r\n    title() {\r\n        return app.translator.trans(translationPrefix + 'title');\r\n    }\r\n\r\n    form() {\r\n        return [\r\n            m('.Form-group', [\r\n                Button.component({\r\n                    className: 'Button',\r\n                    icon: 'map-signs',\r\n                    children: app.translator.trans('flagrow-canned-messages.admin.buttons.configure-messages'),\r\n                    onclick() {\r\n                        m.route(app.route('flagrow-canned-messages'));\r\n                        app.modal.close();\r\n                    },\r\n                }),\r\n            ]),\r\n            m('.Form-group', [\r\n                m('label', app.translator.trans(translationPrefix + 'bbtag')),\r\n                m('input.FormControl', {\r\n                    bidi: this.setting(settingsPrefix + 'bbtag'),\r\n                    placeholder: 'CANNED-MESSAGE',\r\n                }),\r\n                m('.helpText', app.translator.trans('flagrow-canned-messages.admin.settings.bbtag-help')),\r\n            ]),\r\n        ];\r\n    }\r\n}\r\n","import app from 'flarum/app';\r\nimport Component from 'flarum/Component';\r\nimport Select from 'flarum/components/Select';\r\n\r\nexport default class LocaleDropdown extends Component {\r\n    init() {\r\n        this.options = {\r\n            all: app.translator.trans('flagrow-canned-messages.admin.locales.all'),\r\n        };\r\n\r\n        for (let locale in app.data.locales) {\r\n            if (!app.data.locales.hasOwnProperty(locale)) {\r\n                continue;\r\n            }\r\n\r\n            this.options[locale] = app.data.locales[locale] + ' (' + locale + ')';\r\n        }\r\n    }\r\n\r\n    view() {\r\n        return Select.component({\r\n            options: this.options,\r\n            value: this.props.value === null ? 'all' : this.props.value,\r\n            onchange: locale => {\r\n                if (locale === 'all') {\r\n                    this.props.onchange(null);\r\n                } else {\r\n                    this.props.onchange(locale);\r\n                }\r\n            },\r\n        });\r\n    }\r\n}\r\n","import app from 'flarum/app';\r\nimport Component from 'flarum/Component';\r\nimport Button from 'flarum/components/Button';\r\nimport LocaleDropdown from './LocaleDropdown';\r\nimport Select from 'flarum/components/Select';\r\n\r\nexport default class MessageEdit extends Component {\r\n    init() {\r\n        this.message = this.props.message;\r\n        this.dirty = false;\r\n        this.processing = false;\r\n\r\n        if (this.message === null) {\r\n            this.initNewMessage();\r\n        }\r\n    }\r\n\r\n    initNewMessage() {\r\n        this.message = app.store.createRecord('flagrow-canned-message', {\r\n            attributes: {\r\n                key: '',\r\n                locale: null,\r\n                style: null,\r\n                content: '',\r\n            },\r\n        });\r\n    }\r\n\r\n    view() {\r\n        const bbtag = app.data.settings['flagrow.canned-messages.bbtag'] || 'CANNED-MESSAGE';\r\n\r\n        return m('tr', [\r\n            m('td', [\r\n                m('input.FormControl', {\r\n                    value: this.message.key(),\r\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'key')),\r\n                }),\r\n                (this.message.key() ? ['Use as ', m('code', '[' + bbtag + ']' + this.message.key() + '[/' + bbtag + ']')] : null),\r\n            ]),\r\n            m('td', [\r\n                LocaleDropdown.component({\r\n                    value: this.message.locale(),\r\n                    onchange: this.updateAttribute.bind(this, 'locale'),\r\n                }),\r\n            ]),\r\n            m('td', [\r\n                Select.component({\r\n                    value: this.message.style() === null ? 'none' : this.message.style(),\r\n                    onchange: value => {\r\n                        this.updateAttribute('style', value === 'none' ? null : value);\r\n                    },\r\n                    options: {\r\n                        none: 'None',\r\n                        alert: 'Default Alert',\r\n                        'alert-success': 'Success Alert',\r\n                        'alert-error': 'Error Alert',\r\n                    },\r\n                }),\r\n            ]),\r\n            m('td', [\r\n                m('input.FormControl', {\r\n                    value: this.message.content(),\r\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'content')),\r\n                }),\r\n            ]),\r\n            m('td', m('li.ButtonGroup', [\r\n                Button.component({\r\n                    type: 'submit',\r\n                    className: 'Button Button--primary',\r\n                    children: app.translator.trans('flagrow-canned-messages.admin.buttons.' + (this.message.exists ? 'save' : 'add') + '-message'),\r\n                    loading: this.processing,\r\n                    disabled: !this.dirty,\r\n                    onclick: this.saveMessage.bind(this),\r\n                }),\r\n                (this.message.exists ? Button.component({\r\n                    type: 'submit',\r\n                    className: 'Button Button--danger',\r\n                    children: app.translator.trans('flagrow-canned-messages.admin.buttons.delete-message'),\r\n                    loading: this.processing,\r\n                    onclick: this.deleteMessage.bind(this),\r\n                }) : ''),\r\n            ])),\r\n        ]);\r\n    }\r\n\r\n    updateAttribute(attribute, value) {\r\n        this.message.pushAttributes({\r\n            [attribute]: value,\r\n        });\r\n\r\n        this.dirty = true;\r\n    }\r\n\r\n    saveMessage() {\r\n        this.processing = true;\r\n\r\n        const wasNew = !this.message.exists;\r\n\r\n        this.message.save(this.message.data.attributes).then(() => {\r\n            this.processing = false;\r\n            this.dirty = false;\r\n\r\n            if (wasNew) {\r\n                this.initNewMessage();\r\n            }\r\n\r\n            m.redraw();\r\n        }).catch(err => {\r\n            this.processing = false;\r\n\r\n            throw err;\r\n        });\r\n    }\r\n\r\n    deleteMessage() {\r\n        this.processing = true;\r\n\r\n        this.message.delete().then(() => {\r\n            this.processing = false;\r\n\r\n            m.redraw();\r\n        }).catch(err => {\r\n            this.processing = false;\r\n\r\n            throw err;\r\n        });\r\n    }\r\n}\r\n","import app from 'flarum/app';\r\nimport Page from 'flarum/components/Page';\r\nimport Button from 'flarum/components/Button';\r\nimport MessageEdit from './MessageEdit';\r\nimport sortByProp from '../utils/sortByProp';\r\nimport Settings from './Settings';\r\n\r\nexport default class MessagesPane extends Page {\r\n    init() {\r\n        super.init();\r\n\r\n        app.request({\r\n            method: 'GET',\r\n            url: app.forum.attribute('apiUrl') + '/flagrow/canned-messages',\r\n        }).then(result => {\r\n            app.store.pushPayload(result);\r\n\r\n            m.redraw();\r\n        });\r\n    }\r\n\r\n    view() {\r\n        const messages = app.store.all('flagrow-canned-message').sort(sortByProp('key'));\r\n\r\n        return m('.container', [\r\n            m('table.Flagrow-Canned-Messages', [\r\n                m('thead', m('tr', [\r\n                    m('th', app.translator.trans('flagrow-canned-messages.admin.strings.key')),\r\n                    m('th', app.translator.trans('flagrow-canned-messages.admin.strings.locale')),\r\n                    m('th', app.translator.trans('flagrow-canned-messages.admin.strings.style')),\r\n                    m('th', app.translator.trans('flagrow-canned-messages.admin.strings.content')),\r\n                ])),\r\n                m('tbody', messages.map(message => MessageEdit.component({\r\n                    key: message.id(),\r\n                    message,\r\n                }))),\r\n                m('tbody', MessageEdit.component({\r\n                    key: 'new',\r\n                    message: null,\r\n                })),\r\n            ]),\r\n            Button.component({\r\n                className: 'Button',\r\n                icon: 'cog',\r\n                children: app.translator.trans('flagrow-canned-messages.admin.buttons.configure-advanced'),\r\n                onclick() {\r\n                    app.modal.show(new Settings());\r\n                },\r\n            }),\r\n        ]);\r\n    }\r\n}\r\n","/**\r\n * Create a sort function based on a model property\r\n * @param {String} prop\r\n * @param {String} order\r\n * @returns {function(*, *)}\r\n */\r\nexport default function (prop, order = 'asc') {\r\n    return (a, b) => {\r\n        const value1 = a[prop]();\r\n        const value2 = b[prop]();\r\n\r\n        let result = 0;\r\n\r\n        if (value1 > value2) {\r\n            result = 1;\r\n        } else if (value2 > value1) {\r\n            result = -1;\r\n        }\r\n\r\n        if (order === 'desc') {\r\n            result *= -1;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n","import app from 'flarum/app';\nimport Message from '../common/models/Message';\nimport Settings from './components/Settings';\nimport addMessagesPane from './addMessagesPane';\n\napp.initializers.add('flagrow-canned-messages', app => {\n  app.store.models['flagrow-canned-message'] = Message;\n\n  app.extensionSettings['flagrow-canned-messages'] = () => app.modal.show(new Settings());\n\n  addMessagesPane();\n});\n","import {extend} from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport AdminNav from 'flarum/components/AdminNav';\r\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\r\nimport MessagesPage from './components/MessagesPage';\r\n\r\nexport default function () {\r\n    // create the route\r\n    app.routes['flagrow-canned-messages'] = {\r\n        path: '/flagrow/canned-messages',\r\n        component: MessagesPage.component(),\r\n    };\r\n\r\n    extend(AdminNav.prototype, 'items', items => {\r\n        // add the Image Upload tab to the admin navigation menu\r\n        items.add('flagrow-canned-messages', AdminLinkButton.component({\r\n            href: app.route('flagrow-canned-messages'),\r\n            icon: 'map-signs',\r\n            children: app.translator.trans('flagrow-canned-messages.admin.menu.title'),\r\n            description: app.translator.trans('flagrow-canned-messages.admin.menu.description'),\r\n        }));\r\n    });\r\n}\r\n"],"sourceRoot":""}